![CS-Dingtalk-Bot](https://socialify.git.ci/b3nguang/CS-Dingtalk-Bot/image?description=1&font=Inter&forks=1&issues=1&language=1&logo=https%3A%2F%2Favatars.githubusercontent.com%2Fu%2F121670274%3Fs%3D400%26u%3D686132087f2e2324958b610f905a1b388478295b%26v%3D4&name=1&owner=1&pattern=Plus&pulls=1&stargazers=1&theme=Dark)

## âœˆï¸ ä¸€ã€å·¥å…·ç‰¹æ€§

**CS-Dingtalk-Bot** ä½¿ç”¨é’‰é’‰æœºå™¨äºº Webhook è¿›è¡Œ Cobalt Strike ä¸»æœºä¸Šçº¿æé†’

## ğŸš¨ äºŒã€é…ç½®

åˆ›å»ºé’‰é’‰æœºå™¨äººï¼Œå¤åˆ¶ Webhook åœ°å€ï¼Œç²˜è´´åˆ° `main.py` çš„å¯¹åº”éƒ¨åˆ†

![image-20240908200504501](assets/image-20240908200504501.png)

```python
webhook = 'https://oapi.dingtalk.com/robot/send?access_token=xxx' // TODO è¿›è¡Œæ›¿æ¢
```

ä¿®æ”¹ `CS-Dingtalk-Bot.cna` ä¸­ python è„šæœ¬çš„ç»å¯¹è·¯å¾„

```cna
$cmd = 'python3 /root/main.py' . " --computernam " . $computerName . " --internalip " . $internalIP . " --externalip " . $externalIP .  " --username " . $userName;
```

## ğŸš€ ä¸‰ã€ä½¿ç”¨

ç”±äº CS4.9 å·²ç»ç§»é™¤ agscriptï¼Œå› æ­¤åªéœ€å®¢æˆ·ç«¯åŠ è½½ `CS-Dingtalk-Bot.cna` å³å¯

## ğŸ– å››ã€å…è´£å£°æ˜

1. å¦‚æœæ‚¨ä¸‹è½½ã€å®‰è£…ã€ä½¿ç”¨ã€ä¿®æ”¹æœ¬å·¥å…·åŠç›¸å…³ä»£ç ï¼Œå³è¡¨æ˜æ‚¨ä¿¡ä»»æœ¬å·¥å…·
2. åœ¨ä½¿ç”¨æœ¬å·¥å…·æ—¶é€ æˆå¯¹æ‚¨è‡ªå·±æˆ–ä»–äººä»»ä½•å½¢å¼çš„æŸå¤±å’Œä¼¤å®³ï¼Œæˆ‘ä»¬ä¸æ‰¿æ‹…ä»»ä½•è´£ä»»
3. å¦‚æ‚¨åœ¨ä½¿ç”¨æœ¬å·¥å…·çš„è¿‡ç¨‹ä¸­å­˜åœ¨ä»»ä½•éæ³•è¡Œä¸ºï¼Œæ‚¨éœ€è‡ªè¡Œæ‰¿æ‹…ç›¸åº”åæœï¼Œæˆ‘ä»¬å°†ä¸æ‰¿æ‹…ä»»ä½•æ³•å¾‹åŠè¿å¸¦è´£ä»»
4. è¯·æ‚¨åŠ¡å¿…å®¡æ…é˜…è¯»ã€å……åˆ†ç†è§£å„æ¡æ¬¾å†…å®¹ï¼Œç‰¹åˆ«æ˜¯å…é™¤æˆ–è€…é™åˆ¶è´£ä»»çš„æ¡æ¬¾ï¼Œå¹¶é€‰æ‹©æ¥å—æˆ–ä¸æ¥å—
5. é™¤éæ‚¨å·²é˜…è¯»å¹¶æ¥å—æœ¬åè®®æ‰€æœ‰æ¡æ¬¾ï¼Œå¦åˆ™æ‚¨æ— æƒä¸‹è½½ã€å®‰è£…æˆ–ä½¿ç”¨æœ¬å·¥å…·
6. æ‚¨çš„ä¸‹è½½ã€å®‰è£…ã€ä½¿ç”¨ç­‰è¡Œä¸ºå³è§†ä¸ºæ‚¨å·²é˜…è¯»å¹¶åŒæ„ä¸Šè¿°åè®®çš„çº¦æŸ
